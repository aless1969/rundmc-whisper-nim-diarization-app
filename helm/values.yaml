# rundmc-whisper-nim-diarization-app Helm Chart Values
# ================================

# Image configuration

image:
  repository: aless1969/rundmc-whisper-nim-diarization-app
  tag: "1.0.0"
  pullPolicy: IfNotPresent

# Service Configuration
service:
  type: ClusterIP
  port: 8080

# EZUA / Istio configuration
ezua:
  enabled: true
  virtualService:
    # The external hostname for the service
    # Example: code-scanner.apps.pcai.example.com
    endpoint: "rundmc-whisper-nim-diarization-app.${DOMAIN_NAME}"
    # The Istio gateway to bind to
    istioGateway: "istio-system/ezaf-gateway"

env:
  # Variabili d'ambiente custom (se servono)
  WHISPER_MODEL: "base"
  PYANNOTE_MODEL: "diarization@2.1"
  # Altre variabili...

# Resource limits
# resources:
# requests:
#  cpu: "100m"
#   memory: "256Mi"
# limits:
#   cpu: "1000m"
#   memory: "1Gi"

# Copiato da Liav 
resources:
  requests:
    cpu: "500m"
    memory: "1Gi"
  limits:
    cpu: "2"
    memory: "4Gi"


# Standard Ingress (alternative to Istio)
ingress:
  enabled: false
  className: ""
  hosts:
    - host: rundmc-whisper-demo.local
      paths:
        - path: /
          pathType: Prefix
  tls: []


# Image pull secrets (if using private registry)
imagePullSecrets: []
# - name: my-registry-secret

# Number of replicas
replicaCount: 1

# Pod annotations
podAnnotations: {}

# Pod security context
podSecurityContext: {}

# Container security context
securityContext: {}

# Application configuration
app:
  # Port for Uvicorn
  port: 8010


# Node selector
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity
affinity: {}

# Liveness probe
livenessProbe:
  httpGet:
    path: /
    port: http
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3

# Readiness probe
readinessProbe:
  httpGet:
    path: /
    port: http
  initialDelaySeconds: 10
  periodSeconds: 5
  timeoutSeconds: 3
  failureThreshold: 3

# Autoscaling
autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 5
  targetCPUUtilizationPercentage: 80
